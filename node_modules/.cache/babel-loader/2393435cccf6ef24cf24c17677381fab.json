{"ast":null,"code":"import _toConsumableArray from \"D:\\\\IT-KAMASUTRA.COM\\\\React\\\\Project\\\\SocialNetwork\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"D:\\\\IT-KAMASUTRA.COM\\\\React\\\\Project\\\\SocialNetwork\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport { usersApi } from \"../DAL/api\"; //Constats:\n\nvar FOLLOW = \"FOLLOW\";\nvar UNFOLLOW = \"UNFOLLOW\";\nvar SET_USERS = \"SET_USERS\";\nvar SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\nvar SET_TOTAL_USERS_COUNT = \"SET_TOTAL_USERS_COUNT\";\nvar TOGGLE_IS_FETCHING = \"TOGGLE_IS_FETCHING\";\nvar TOGGLE_IS_FOLLOWING_PROGRESS = \"TOGGLE_IS_FOLLOWING_PROGRESS\";\nvar initialState = {\n  users: [],\n  pageSize: 15,\n  totalUsersCount: 0,\n  currentPage: 1,\n  isFetching: true,\n  followingInProgress: []\n};\n\nvar UsersReducer = function UsersReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case FOLLOW:\n      return _objectSpread({}, state, {\n        users: state.users.map(function (u) {\n          // идентично записи users: [...state.users]\n          if (u.id === action.userId) {\n            return _objectSpread({}, u, {\n              followed: true\n            });\n          }\n\n          return u;\n        })\n      });\n\n    case UNFOLLOW:\n      return _objectSpread({}, state, {\n        users: state.users.map(function (u) {\n          // идентично записи users: [...state.users]\n          if (u.id === action.userId) {\n            return _objectSpread({}, u, {\n              followed: false\n            });\n          }\n\n          return u;\n        })\n      });\n\n    case SET_USERS:\n      {\n        return _objectSpread({}, state, {\n          users: action.users\n        });\n      }\n\n    case SET_CURRENT_PAGE:\n      {\n        return _objectSpread({}, state, {\n          currentPage: action.currentPage\n        });\n      }\n\n    case SET_TOTAL_USERS_COUNT:\n      {\n        return _objectSpread({}, state, {\n          totalUsersCount: action.count\n        });\n      }\n\n    case TOGGLE_IS_FETCHING:\n      {\n        return _objectSpread({}, state, {\n          isFetching: action.isFetching\n        });\n      }\n\n    case TOGGLE_IS_FOLLOWING_PROGRESS:\n      {\n        return _objectSpread({}, state, {\n          followingInProgress: action.isFetching ? [].concat(_toConsumableArray(state.followingInProgress), [action.userId]) : state.followingInProgress.filter(function (id) {\n            return id != action.userId;\n          })\n        });\n      }\n\n    default:\n      return state;\n  }\n}; //ActionCreators:\n\n\nexport var followSuccess = function followSuccess(userId) {\n  return {\n    type: FOLLOW,\n    userId: userId\n  };\n};\nexport var unfollowSuccess = function unfollowSuccess(userId) {\n  return {\n    type: UNFOLLOW,\n    userId: userId\n  };\n};\nexport var setUsers = function setUsers(users) {\n  return {\n    type: SET_USERS,\n    users: users\n  };\n};\nexport var setCurrentPage = function setCurrentPage(currentPage) {\n  return {\n    type: SET_CURRENT_PAGE,\n    currentPage: currentPage\n  };\n};\nexport var setTotalUsersCount = function setTotalUsersCount(totalUsersCount) {\n  return {\n    type: SET_TOTAL_USERS_COUNT,\n    count: totalUsersCount\n  };\n};\nexport var toggleIsFetching = function toggleIsFetching(isFetching) {\n  return {\n    type: TOGGLE_IS_FETCHING,\n    isFetching: isFetching\n  };\n};\nexport var toggleFollowingProgress = function toggleFollowingProgress(isFetching, userId) {\n  return {\n    type: TOGGLE_IS_FOLLOWING_PROGRESS,\n    isFetching: isFetching,\n    userId: userId\n  };\n}; //ThunkCreators:\n\nexport var getUsers = function getUsers(currentPage, pageSize) {\n  return function (dispatch) {\n    dispatch(toggleIsFetching(true));\n    usersApi.getUsers(currentPage, pageSize).then(function (data) {\n      dispatch(toggleIsFetching(false));\n      dispatch(setUsers(data.items));\n      dispatch(setTotalUsersCount(data.totalCount));\n    });\n  };\n};\nexport var follow = function follow() {\n  return;\n};\nexport default UsersReducer;","map":{"version":3,"sources":["D:\\IT-KAMASUTRA.COM\\React\\Project\\SocialNetwork\\src\\Reducers-BLL\\UsersReducer.js"],"names":["usersApi","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","TOGGLE_IS_FETCHING","TOGGLE_IS_FOLLOWING_PROGRESS","initialState","users","pageSize","totalUsersCount","currentPage","isFetching","followingInProgress","UsersReducer","state","action","type","map","u","id","userId","followed","count","filter","followSuccess","unfollowSuccess","setUsers","setCurrentPage","setTotalUsersCount","toggleIsFetching","toggleFollowingProgress","getUsers","dispatch","then","data","items","totalCount","follow"],"mappings":"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","sourcesContent":["import { usersApi } from \"../DAL/api\";\r\n\r\n//Constats:\r\nconst FOLLOW = \"FOLLOW\";\r\nconst UNFOLLOW = \"UNFOLLOW\";\r\nconst SET_USERS = \"SET_USERS\";\r\nconst SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\r\nconst SET_TOTAL_USERS_COUNT = \"SET_TOTAL_USERS_COUNT\";\r\nconst TOGGLE_IS_FETCHING = \"TOGGLE_IS_FETCHING\";\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = \"TOGGLE_IS_FOLLOWING_PROGRESS\";\r\n\r\nlet initialState = {\r\n  users: [],\r\n  pageSize: 15,\r\n  totalUsersCount: 0,\r\n  currentPage: 1,\r\n  isFetching: true,\r\n  followingInProgress: [],\r\n};\r\n\r\nconst UsersReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n\r\n    case FOLLOW:\r\n      return {\r\n        ...state,\r\n        users: state.users.map(u => {\r\n          // идентично записи users: [...state.users]\r\n          if (u.id === action.userId) {\r\n            return { ...u, followed: true };\r\n          }\r\n          return u;\r\n        })\r\n      };\r\n    case UNFOLLOW:\r\n      return {\r\n        ...state,\r\n        users: state.users.map(u => {\r\n          // идентично записи users: [...state.users]\r\n          if (u.id === action.userId) {\r\n            return { ...u, followed: false };\r\n          }\r\n          return u;\r\n        })\r\n      };\r\n    case SET_USERS: {\r\n      return { ...state, users: action.users };\r\n    }\r\n    case SET_CURRENT_PAGE: {\r\n      return { ...state, currentPage: action.currentPage };\r\n    }\r\n    case SET_TOTAL_USERS_COUNT: {\r\n      return { ...state, totalUsersCount: action.count }\r\n    }\r\n    case TOGGLE_IS_FETCHING: {\r\n      return { ...state, isFetching: action.isFetching }\r\n    }\r\n    case TOGGLE_IS_FOLLOWING_PROGRESS: {\r\n\r\n      return {\r\n        ...state,\r\n        followingInProgress: action.isFetching\r\n          ? [...state.followingInProgress, action.userId]\r\n          : state.followingInProgress.filter(id => id != action.userId)\r\n      }\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n//ActionCreators:\r\nexport const followSuccess = (userId) => ({ type: FOLLOW, userId });\r\nexport const unfollowSuccess = (userId) => ({ type: UNFOLLOW, userId });\r\nexport const setUsers = (users) => ({ type: SET_USERS, users });\r\nexport const setCurrentPage = (currentPage) => ({ type: SET_CURRENT_PAGE, currentPage });\r\nexport const setTotalUsersCount = (totalUsersCount) => ({ type: SET_TOTAL_USERS_COUNT, count: totalUsersCount });\r\nexport const toggleIsFetching = (isFetching) => ({ type: TOGGLE_IS_FETCHING, isFetching });\r\nexport const toggleFollowingProgress = (isFetching, userId) => ({ type: TOGGLE_IS_FOLLOWING_PROGRESS, isFetching, userId });\r\n\r\n//ThunkCreators:\r\nexport const getUsers = (currentPage, pageSize) => {\r\n  return (dispatch) => {\r\n\r\n    dispatch(toggleIsFetching(true))\r\n\r\n    usersApi.getUsers(currentPage, pageSize)\r\n      .then(data => {\r\n        dispatch(toggleIsFetching(false))\r\n        dispatch(setUsers(data.items))\r\n        dispatch(setTotalUsersCount(data.totalCount))\r\n      });\r\n  }\r\n}\r\n\r\nexport const follow = () => {\r\n  return \r\n}\r\nexport default UsersReducer;\r\n"]},"metadata":{},"sourceType":"module"}